# 《演进式架构》读后感

《演进式架构》一书主要介绍的是通过哪些方面、哪些手段来让项目架构变得更加可变、更加可演进。  
本文主要是读完本书后的一些内容归类记录（其中对于书中的内容会有所省略）

## 一、基本原则
1、架构需要贴近于实际业务需求，在充分理解业务需求的前提下，找到会影响可持续演进的因素，比如架构设计、数据设计、安全性等，充分理解相关联的各个要素，以便寻找各个要素的平衡点。  
（注：毕竟代码、算法主要还是解决实际问题为主，着重在当前现实环境的考量往往还是比解决虚拟出近期不会碰到的问题更加重要；另外业务需求、技术框架、人员以及人员的技术知识储备是多变的，技术架构不可能是一成不变的，也就是技术架构需要保持可动态变化的能力）  

2、可借助持续集成等能力来提升项目开发的快速试验、创新、改进等能力；  
（注：技术环境日新月异，开源解决方案层出不穷，不管是从业务开发角度或从技术更新迭代考虑，项目开发都需要保持一定的敏捷性，传统的手工方式，不仅容易出错，一次开发到发布甚至回滚的周期都比较长）  

3、可建立与目标系统架构相仿的团队；  
（注：架构不止跟代码相关，也跟人员、组织结构相关，构建与目标系统相仿的团队，事半功倍，沟通更简单，也就是围绕业务的全功能团队会更加具有可变性些，因为可减少不少的跨团队沟通效率问题） 

## 二、保持演进式的三方面  
在找到会影响可持续演进的因素后，需要通过对应的方式来保持可演进性。  
主要可通过以下三方面：

1、增量变更  
增量变更主要是保障新旧版本可同时使用或可来回切换，这样项目的伸缩性会更加好。  
增量变更主要包含两个部分：增量构建软件以及增量部署软件。  
（注：因为在项目中，每个方面都是关联的，项目中进行增量变更，往往除了涉及开发之外还有运维相关的，比如代码中的兼容性增量升级，需要监控相关旧服务是否已处于未调用可下线状态，也就是在这期间需要捕捉各个方面的情况，以便构建一致的执行机制，最后可通过持续集成的方式来进行自动化部署。也就是增量变更实际上更依赖于持续集成的可用性。）

2、适应度函数
适应度函数可用于计算解决方案与既定目标的差距，当有变化时，需要评估重要维度的变化，也能够验证相关功能是否符合预期。  
在实际开发中，随着项目开发人员、代码量的增加，如何保障已有功能的正确性就显得极为重要。  
所以项目的功能、特征、各个方面都需要有客观的完整性评估，以便每次改动时能够评估是否保留了项目的重要特征，适应度函数可以让以前模糊又主观的评价标准变得更加具体，比如单元测试，契约测试，过程衡量指标，监控，集成测试，架构衡量指标等等。  
（注：适应度函数的运行机制或检查方式是多样的，最重要的是在项目有变化时能够及时运转检验，从而获取变化是否符合预期的可量化结果。）

3、适当耦合
在项目中，绝对性的内聚解耦是不存在的，所以还是需要保留适当的耦合，在此基础上对项目代码进行拆分组合，以便更加清晰，也能够更好地添加适应度函数。  
可通过模块化，组件化来让代码架构更加清晰（模块化意味着逻辑分组，组件则可让代码进行物理分组），这样可以不让代码容易陷入大泥团架构中。  
比如目前流行的微服务架构，微服务实际上是基于业务领域来搭建模块，每个微服务即是对应某项功能的模块，模块对外隐藏实现细节，模块内可根据实际情况采用不同的架构，比如采用分层架构或模块化的单体架构等等。  
另外，在模块内还是会采用一定的组件化，这样既可以让项目代码拆而分支，去除中心化，更加简捷，也可以进行模块独立观察、独立部署等，可以更好地适应未来的发展。

## 三、相关指南
1、去除不必要的可变性；  
2、让决策可逆；  
3、演进优于预测；  
4、构建防腐层；先简单后整理，初始阶段需求不明确，过早引入成熟方案可能会带来技术债；  
5、案例分析，服务模版；  
6、构建可牺牲架构；  
7、应对外部变化；  
8、更新库与更新框架；  
9、持续交付优于快照；  
10、服务内部版本化；  
11、需要团队大家对项目的整体发展有一定的共识与认知；  
12、需要建立一定的试验文化，可采用：  
1）从外部吸收想法；  
2）鼓励明确的改进；  
3）进行探针试验并稳定下来；  
4）创造创新时间；  
5）采用基于集合的开发方式；  
6）连接工程师和最终用户；  

## 四、延伸方式  
1、基于AI的适应度函数；  
2、生成式测试；  